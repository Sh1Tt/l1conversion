<!DOCTYPE html>
  <html>
    <head>
      <script type="text/javascript">
        const mark = {
          id: "[ID]",
          primary: "[PRIMARY]",
          evo: "[EVOLUTIONARY]",
          eop = "++++++++++++++++++++++++++++++++++++"
        };
        const fileName = "output.txt";
        const startOf = (t,m) => t.indexOf(m);
        const endOf = (t,m) => t.indexOf(m) + m.length;
        const parse = (t,s,e) => t.slice(endOf(t,s), startOf(t,e)).replace(" +","").replace(/[\\n]/gi,"");
        const section = t => {
          const id = parse(t, mark.id, mark.primary);
          const primary = parse(t, mark.primary, mark.evo);
          return '"'+id+'","'+primary+'","'+t+'"';
        }
        const openFile = e => {
          const reader = new FileReader();
          reader.readAsText(e.target.files[0]);
          reader.onload = () => {
              const r = reader.result;
              const priv = r.slice(0, endOf(r,mark.eop));
              const pub = r.slice(endOf(r,mark.eop) + 1);
              const output  = section(priv)+\\nsection(pub);
              save(output);
          };
          function save(data) {
              const blob = new Blob([data], {type: 'text/csv'});
              if(window.navigator.msSaveOrOpenBlob) {
                  window.navigator.msSaveBlob(blob, fileName);
              }
              else{
                  const elem = window.document.createElement('a');
                  elem.href = window.URL.createObjectURL(blob);
                  elem.download = fileName;        
                  document.body.appendChild(elem);
                  elem.click();        
                  document.body.removeChild(elem);
              }
          };
        };
      </script>
    </head>
    <body>
      <h1>Hello World</h1>
      <input type='file' accept='text/plain' onchange='openFile(event)'>
    </body>
  </html>
